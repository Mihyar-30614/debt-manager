{{define "payments_content"}}
<div class="row">
  <div>
    <h1>Payment history</h1>
    <p>All payments across all debts.</p>
  </div>
  <a href="/" class="btn">← Back</a>
</div>

<div class="spacer"></div>

{{if .Payments}}
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Debt</th>
      <th>Amount</th>
      <th>Note</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {{range .Payments}}
    <tr>
      <td>{{.PaidOn.Format "2006-01-02"}}</td>
      <td><a class="link" href="/debts/view?id={{.DebtID}}">{{.DebtName}}</a></td>
      <td><strong>{{money .AmountCents}}</strong></td>
      <td>{{if .Note}}{{.Note}}{{else}}<span style="color: var(--muted);">—</span>{{end}}</td>
      <td>
        <div class="row" style="gap: 8px; justify-content: flex-start;">
          <a href="/payments/edit?id={{.ID}}" class="btn" style="padding: 6px 10px; font-size: 12px;">Edit</a>
          <form method="POST" action="/payments/delete" style="margin:0;" onsubmit="return confirm('Are you sure you want to delete this payment? The debt balance will be adjusted.');">
            <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}" />
            <input type="hidden" name="id" value="{{.ID}}" />
            <button class="btn danger" type="submit" style="padding: 6px 10px; font-size: 12px;">Delete</button>
          </form>
        </div>
      </td>
    </tr>
    {{end}}
  </tbody>
</table>
{{else}}
<div class="card empty-state">
  <h3>No payments yet</h3>
  <p>Record payments from the dashboard or debt pages.</p>
  <a href="/" class="btn primary">Go to dashboard</a>
</div>
{{end}}
{{end}}
{{define "payments.html"}}{{template "layout" .}}{{end}}
